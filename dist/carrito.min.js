"use strict";var _require=require("express"),application=_require.application,express=require("express"),app=express(),puerto=process.env.port||3e3;app.use(express.json());var _require2=require("express-validator"),check=_require2.check,validationResult=_require2.validationResult,carritos=[{id:1,marca:"BMW",modelo:"x3",year:"2020"},{id:2,marca:"AUDI",modelo:"A1",year:"2021"},{id:3,marca:"MERCEDES",modelo:"CLASE A",year:"2022"}];app.get("/api/carritos/",function(a,r){r.send(carritos)}),app.get("/api/buscacarro/:maracbuscar",function(r,a){var e=carritos.find(function(a){return a.marca===r.params.maracbuscar});e?a.send(e):a.status(404).send("Este carro no existe")}),app.get("/api/carros/id/:id",function(a,r){r.send(["ACURA","TOYOTA","FIAT","MACERATI"][a.params.id])}),app.get("/api/carros/:empresa/:modelo",function(a,r){r.send(a.params)}),app.post("/api/carros",function(a,r){carritos.length;var e={id:a.body.id,marca:a.body.marca,modelo:a.body.modelo,year:a.body.year};carritos.push(e),r.status(201).send(carritos)}),app.post("/api/carros2",function(a,r){if(!a.body.marca||a.body.marca.length<3)r.status(400).send("la marca no es la que se espera");else{var e={id:carritos.length,marca:a.body.marca,modelo:a.body.modelo,year:a.body.year};carritos.push(e),r.status(201).send(carritos)}}),app.post("/api/carros3",[check("marca").isLength({min:3}),check("modelo").isLength({min:3})],function(a,r){var e=validationResult(a);if(!e.isEmpty())return r.status(422).json({errors:e.array()});var s={id:carritos.length,marca:a.body.marca,modelo:a.body.modelo,year:a.body.year};carritos.push(s),r.status(201).send(carritos)}),app.put("/api/carros3/:id",[check("marca").isLength({min:3}),check("modelo").isLength({min:3})],function(r,a){var e=validationResult(r);if(!e.isEmpty())return a.status(422).json({errors:e.array()});var s=carritos.find(function(a){return a.id===parseInt(r.params.id)});s?(s.marca=r.body.marca,s.modelo=r.body.modelo,s.year=r.body.year,a.status(200).send(s)):a.status(404).send("no existe ese codigo de carro="+r.params.id)}),app.listen(puerto,function(){return console.log("escuchando en puerto "+puerto)});
//# sourceMappingURL=carrito.min.js.map
