{"version":3,"sources":["carrito.js"],"names":["require","application","express","app","process","env","use","json","check","validationResult","puerto","modelo","year","id","marca","get","req","res","carritos","respuesta","find","params","maracbuscar","send","status","post","length","nuevoCarro","body","push","carroID","errors","isEmpty","array","isLength","put","car","parseInt","listen","console","log"],"mappings":"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","file":"carrito.min.js","sourcesContent":["const { application } = require(\"express\");\r\nconst express = require(\"express\");\r\nconst app = express();\r\nconst puerto = process.env.port || 3000;\r\napp.use(express.json());\r\n\r\nconst { check, validationResult } = require(\"express-validator\");\r\n\r\nvar carritos = [\r\n  { id: 1, marca: \"BMW\", modelo: \"x3\", year: \"2020\" },\r\n  { id: 2, marca: \"AUDI\", modelo: \"A1\", year: \"2021\" },\r\n  { id: 3, marca: \"MERCEDES\", modelo: \"CLASE A\", year: \"2022\" },\r\n];\r\n\r\napp.get(\"/api/carritos/\", (req, res) => {\r\n    res.send(carritos);\r\n})\r\n\r\napp.get(\"/api/buscacarro/:maracbuscar\", (req, res) => {\r\n    const respuesta = carritos.find((respuesta) => respuesta.marca === req.params.maracbuscar);\r\n    if (!respuesta) {\r\n        res.status(404).send(\"Este carro no existe\");\r\n    } else {\r\n        res.send(respuesta);\r\n    }\r\n\r\n})\r\n\r\napp.get(\"/api/carros/id/:id\", (req, res) => {\r\n    //res.send(req.params.id);\r\n    var carritos = [\"ACURA\", \"TOYOTA\", \"FIAT\", \"MACERATI\"];\r\n    res.send(carritos[req.params.id]);\r\n  });\r\n  \r\n  \r\n  app.get(\"/api/carros/:empresa/:modelo\", (req, res) => {\r\n    // res.send(req.params.empresa + \" \" + req.params.modelo);\r\n    res.send(req.params);\r\n  });\r\n\r\n\r\n  app.post(\"/api/carros\", (req, res) => {\r\n    var carroID = carritos.length;\r\n    var nuevoCarro = {\r\n        id: req.body.id,\r\n        marca: req.body.marca,\r\n        modelo: req.body.modelo,\r\n        year: req.body.year,\r\n    };\r\n    carritos.push(nuevoCarro);\r\n    res.status(201).send(carritos);\r\n})\r\n\r\napp.post(\"/api/carros2\", (req, res) => {\r\n    if (!req.body.marca || req.body.marca.length < 3) {\r\n      res.status(400).send(\"la marca no es la que se espera\");\r\n      return;\r\n    }\r\n  \r\n    var carroId = carritos.length;\r\n    var nuevoCarro = {\r\n      id: carroId,\r\n      marca: req.body.marca,\r\n      modelo: req.body.modelo,\r\n      year: req.body.year,\r\n    };\r\n    carritos.push(nuevoCarro);\r\n    //poner el codigo 201 que es el correcto, de 200\r\n    res.status(201).send(carritos);\r\n    //res.send(nuevoCarro);\r\n  });\r\n\r\n\r\n  app.post(\r\n    \"/api/carros3\",\r\n    //[check(\"marca\").isEmail(), check(\"modelo\").isLength({ min: 3 })],\r\n    [check(\"marca\").isLength({ min: 3 }), check(\"modelo\").isLength({ min: 3 })],\r\n    (req, res) => {\r\n      const errors = validationResult(req);\r\n      if (!errors.isEmpty()) {\r\n        return res.status(422).json({ errors: errors.array() });\r\n      }\r\n  \r\n      var carroId = carritos.length;\r\n      var nuevoCarro = {\r\n        id: carroId,\r\n        marca: req.body.marca,\r\n        modelo: req.body.modelo,\r\n        year: req.body.year,\r\n      };\r\n      carritos.push(nuevoCarro);\r\n      //poner el codigo 201 que es el correcto, de 200\r\n      res.status(201).send(carritos);\r\n      //res.send(nuevoCarro);\r\n    }\r\n  );\r\n  //parte 3 PUT\r\n  app.put(\r\n    \"/api/carros3/:id\",\r\n  \r\n    //dejamos la validacion\r\n    [check(\"marca\").isLength({ min: 3 }), check(\"modelo\").isLength({ min: 3 })],\r\n    (req, res) => {\r\n      const errors = validationResult(req);\r\n      if (!errors.isEmpty()) {\r\n        return res.status(422).json({ errors: errors.array() });\r\n      }\r\n      //verificamos si existe el registro en el arreglo\r\n      const car = carritos.find((car) => car.id === parseInt(req.params.id));\r\n  \r\n      if (!car) {\r\n        res.status(404).send(\"no existe ese codigo de carro=\" + req.params.id);\r\n        return;\r\n      }\r\n      car.marca = req.body.marca;\r\n      car.modelo = req.body.modelo;\r\n      car.year = req.body.year;\r\n  \r\n      //poner el codigo 201 que es el correcto, de 200\r\n      res.status(200).send(car);\r\n      //res.send(nuevoCarro);\r\n    }\r\n  );\r\n\r\n\r\n\r\n\r\napp.listen(puerto, () => console.log(\"escuchando en puerto \" + puerto));"]}